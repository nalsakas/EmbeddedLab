<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Task46: rpl4.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Task46
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">rpl4.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;avr/io.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="rpl2_8h_source.html">rpl2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rpl3_8h_source.html">rpl3.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="uart_8h_source.html">uart.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pins_8h_source.html">pins.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="api_8h_source.html">api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rpl4_8h_source.html">rpl4.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acf6101a6f6e91b8002b7a4755403f49e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpl4_8c.html#acf6101a6f6e91b8002b7a4755403f49e">rpl4_scache_add</a> (<a class="el" href="rpl4_8h.html#abaa38853744e84ecd2e8128a9981cf5c">RPL4_CACHE_ITEM</a> *item)</td></tr>
<tr class="memdesc:acf6101a6f6e91b8002b7a4755403f49e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds message to the outgoing cache. This function used internally by <a class="el" href="rpl4_8c.html#a9621e3f91cb52e8fb31da95eb6a9f1ba" title="Creates Layer4 packet, fills in structure members and then passes it to the lower levels.">rpl4_send()</a> function.  <a href="rpl4_8c.html#acf6101a6f6e91b8002b7a4755403f49e">More...</a><br /></td></tr>
<tr class="separator:acf6101a6f6e91b8002b7a4755403f49e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bc37194f63f98dbc82db26f861cdf74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpl4_8c.html#a1bc37194f63f98dbc82db26f861cdf74">rpl4_scache_remove</a> (uint8_t identification)</td></tr>
<tr class="memdesc:a1bc37194f63f98dbc82db26f861cdf74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove message from the outgoing cache whose id equals to identification.  <a href="rpl4_8c.html#a1bc37194f63f98dbc82db26f861cdf74">More...</a><br /></td></tr>
<tr class="separator:a1bc37194f63f98dbc82db26f861cdf74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8012faf95ab815322cec512b790e4a8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpl4_8c.html#a8012faf95ab815322cec512b790e4a8b">rpl4_ack_resend</a> ()</td></tr>
<tr class="memdesc:a8012faf95ab815322cec512b790e4a8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method first sends ACK messages and after that sends resend messages. It is used inside interrupt handler. Messages are removed from the cache after sending. One message is sent at a time. Other cached messages has to wait their turn on following timer interrupts.  <a href="rpl4_8c.html#a8012faf95ab815322cec512b790e4a8b">More...</a><br /></td></tr>
<tr class="separator:a8012faf95ab815322cec512b790e4a8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22f281e454816558761ad0933865e182"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpl4_8c.html#a22f281e454816558761ad0933865e182">rpl4_rcache_find</a> (uint8_t identification)</td></tr>
<tr class="memdesc:a22f281e454816558761ad0933865e182"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the message/packet inside Layer4 incomming cache. It is used to find out source address of the incoming message.  <a href="rpl4_8c.html#a22f281e454816558761ad0933865e182">More...</a><br /></td></tr>
<tr class="separator:a22f281e454816558761ad0933865e182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a425c83e3917d120214954ad684bee40e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpl4_8c.html#a425c83e3917d120214954ad684bee40e">rpl4_rcache_add</a> (<a class="el" href="rpl4_8h.html#abaa38853744e84ecd2e8128a9981cf5c">RPL4_CACHE_ITEM</a> *item)</td></tr>
<tr class="memdesc:a425c83e3917d120214954ad684bee40e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds message/packet to Layer4 imcomming cache.  <a href="rpl4_8c.html#a425c83e3917d120214954ad684bee40e">More...</a><br /></td></tr>
<tr class="separator:a425c83e3917d120214954ad684bee40e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9621e3f91cb52e8fb31da95eb6a9f1ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpl4_8c.html#a9621e3f91cb52e8fb31da95eb6a9f1ba">rpl4_send</a> (uint8_t source, uint8_t destination, uint8_t flags, uint8_t *str)</td></tr>
<tr class="memdesc:a9621e3f91cb52e8fb31da95eb6a9f1ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates Layer4 packet, fills in structure members and then passes it to the lower levels.  <a href="rpl4_8c.html#a9621e3f91cb52e8fb31da95eb6a9f1ba">More...</a><br /></td></tr>
<tr class="separator:a9621e3f91cb52e8fb31da95eb6a9f1ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac80ef5ff59c5f98f2d4d06948dcde13d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpl4_8c.html#ac80ef5ff59c5f98f2d4d06948dcde13d">rpl4_receive</a> (<a class="el" href="rpl4_8h.html#aaf1a71c1875dad4c768957f6cf0dfccc">RPL4_PACKET</a> *packetL4)</td></tr>
<tr class="memdesc:ac80ef5ff59c5f98f2d4d06948dcde13d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives Layer4 packet. Fills Layer4 packet structure pointer given in parameters.  <a href="rpl4_8c.html#ac80ef5ff59c5f98f2d4d06948dcde13d">More...</a><br /></td></tr>
<tr class="separator:ac80ef5ff59c5f98f2d4d06948dcde13d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae225fe0b0ee13cb391a684edd58fa0d4"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpl4_8c.html#ae225fe0b0ee13cb391a684edd58fa0d4">PACKET_IDENTIFICATION</a> = 1</td></tr>
<tr class="memdesc:ae225fe0b0ee13cb391a684edd58fa0d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">L4 packet identification counter.  <a href="rpl4_8c.html#ae225fe0b0ee13cb391a684edd58fa0d4">More...</a><br /></td></tr>
<tr class="separator:ae225fe0b0ee13cb391a684edd58fa0d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd9891b4a95664ad68de59667380d0b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rpl4_8h.html#abaa38853744e84ecd2e8128a9981cf5c">RPL4_CACHE_ITEM</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpl4_8c.html#afd9891b4a95664ad68de59667380d0b5">PACKET_SEND_CACHE</a> [0]</td></tr>
<tr class="memdesc:afd9891b4a95664ad68de59667380d0b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">L4 packet cache for sended packets.  <a href="rpl4_8c.html#afd9891b4a95664ad68de59667380d0b5">More...</a><br /></td></tr>
<tr class="separator:afd9891b4a95664ad68de59667380d0b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dd1dd9ce3d333925df66b8f918e53fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rpl4_8h.html#abaa38853744e84ecd2e8128a9981cf5c">RPL4_CACHE_ITEM</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpl4_8c.html#a2dd1dd9ce3d333925df66b8f918e53fb">PACKET_RECEIVE_CACHE</a> [0]</td></tr>
<tr class="memdesc:a2dd1dd9ce3d333925df66b8f918e53fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">L4 packet cache for received packets.  <a href="rpl4_8c.html#a2dd1dd9ce3d333925df66b8f918e53fb">More...</a><br /></td></tr>
<tr class="separator:a2dd1dd9ce3d333925df66b8f918e53fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8012faf95ab815322cec512b790e4a8b" name="a8012faf95ab815322cec512b790e4a8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8012faf95ab815322cec512b790e4a8b">&#9670;&#160;</a></span>rpl4_ack_resend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rpl4_ack_resend </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method first sends ACK messages and after that sends resend messages. It is used inside interrupt handler. Messages are removed from the cache after sending. One message is sent at a time. Other cached messages has to wait their turn on following timer interrupts. </p>

</div>
</div>
<a id="a425c83e3917d120214954ad684bee40e" name="a425c83e3917d120214954ad684bee40e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a425c83e3917d120214954ad684bee40e">&#9670;&#160;</a></span>rpl4_rcache_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpl4_rcache_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpl4_8h.html#abaa38853744e84ecd2e8128a9981cf5c">RPL4_CACHE_ITEM</a> *&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds message/packet to Layer4 imcomming cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="a22f281e454816558761ad0933865e182" name="a22f281e454816558761ad0933865e182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22f281e454816558761ad0933865e182">&#9670;&#160;</a></span>rpl4_rcache_find()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpl4_rcache_find </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>identification</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds the message/packet inside Layer4 incomming cache. It is used to find out source address of the incoming message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identification</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="ac80ef5ff59c5f98f2d4d06948dcde13d" name="ac80ef5ff59c5f98f2d4d06948dcde13d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac80ef5ff59c5f98f2d4d06948dcde13d">&#9670;&#160;</a></span>rpl4_receive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpl4_receive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpl4_8h.html#aaf1a71c1875dad4c768957f6cf0dfccc">RPL4_PACKET</a> *&#160;</td>
          <td class="paramname"><em>packetL4</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receives Layer4 packet. Fills Layer4 packet structure pointer given in parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packetL4</td><td>Address of the Layer4 packet structure. </td></tr>
    <tr><td class="paramname">str</td><td>Data to be sent. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return 0 on success, -1 otherwise. </dd></dl>

</div>
</div>
<a id="acf6101a6f6e91b8002b7a4755403f49e" name="acf6101a6f6e91b8002b7a4755403f49e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf6101a6f6e91b8002b7a4755403f49e">&#9670;&#160;</a></span>rpl4_scache_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpl4_scache_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpl4_8h.html#abaa38853744e84ecd2e8128a9981cf5c">RPL4_CACHE_ITEM</a> *&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds message to the outgoing cache. This function used internally by <a class="el" href="rpl4_8c.html#a9621e3f91cb52e8fb31da95eb6a9f1ba" title="Creates Layer4 packet, fills in structure members and then passes it to the lower levels.">rpl4_send()</a> function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>Message to be added to the cache. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success returns 0. </dd></dl>

</div>
</div>
<a id="a1bc37194f63f98dbc82db26f861cdf74" name="a1bc37194f63f98dbc82db26f861cdf74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bc37194f63f98dbc82db26f861cdf74">&#9670;&#160;</a></span>rpl4_scache_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rpl4_scache_remove </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>identification</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove message from the outgoing cache whose id equals to identification. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identification</td><td>id if the message to be removed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9621e3f91cb52e8fb31da95eb6a9f1ba" name="a9621e3f91cb52e8fb31da95eb6a9f1ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9621e3f91cb52e8fb31da95eb6a9f1ba">&#9670;&#160;</a></span>rpl4_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rpl4_send </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>destination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates Layer4 packet, fills in structure members and then passes it to the lower levels. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>Source address </td></tr>
    <tr><td class="paramname">destination</td><td>Destination address </td></tr>
    <tr><td class="paramname">flags</td><td>Layer4 packet flags </td></tr>
    <tr><td class="paramname">str</td><td>Data to be sent </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ae225fe0b0ee13cb391a684edd58fa0d4" name="ae225fe0b0ee13cb391a684edd58fa0d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae225fe0b0ee13cb391a684edd58fa0d4">&#9670;&#160;</a></span>PACKET_IDENTIFICATION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t PACKET_IDENTIFICATION = 1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>L4 packet identification counter. </p>

</div>
</div>
<a id="a2dd1dd9ce3d333925df66b8f918e53fb" name="a2dd1dd9ce3d333925df66b8f918e53fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dd1dd9ce3d333925df66b8f918e53fb">&#9670;&#160;</a></span>PACKET_RECEIVE_CACHE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rpl4_8h.html#abaa38853744e84ecd2e8128a9981cf5c">RPL4_CACHE_ITEM</a> PACKET_RECEIVE_CACHE[0]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>L4 packet cache for received packets. </p>

</div>
</div>
<a id="afd9891b4a95664ad68de59667380d0b5" name="afd9891b4a95664ad68de59667380d0b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd9891b4a95664ad68de59667380d0b5">&#9670;&#160;</a></span>PACKET_SEND_CACHE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rpl4_8h.html#abaa38853744e84ecd2e8128a9981cf5c">RPL4_CACHE_ITEM</a> PACKET_SEND_CACHE[0]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>L4 packet cache for sended packets. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
